- defaults:
  link:
    relink: true
    stdin: true
    stdout: true
  shell:
    stdin: true
    stdout: true
    stderr: true

- clean: [
  '~',
  '~/.config'
]

- create:
  # Create all freedesktop user directories
  # https://wiki.archlinux.org/title/XDG_user_directories
  - ~/Desktop
  - ~/Documents
  - ~/Downloads
  - ~/Music
  - ~/Pictures/Screenshots
  - ~/Public
  - ~/Templates
  - ~/Videos

- link:
  ~/.local/bin:
    create: true
    path: scripts

  ~/.p10k.zsh: home/.p10k.zsh
  ~/.zshrc:    home/.zshrc

  ~/.config/bat:      config/bat
  ~/.config/kitty:    config/kitty
  ~/.config/lazygit:  config/lazygit
  ~/.config/lite-xl:  config/lite-xl
  ~/.config/macchina: config/macchina
  ~/.config/mpv:      config/mpv
  ~/.config/neofetch: config/neofetch
  ~/.config/nvim:     config/nvim
  ~/.config/paru:     config/paru
  ~/.config/yazi:     config/yazi
  ~/.config/yt-dlp:   config/yt-dlp

- shell:
  - [git submodule update --init --recursive, Installing git submodules]
  -
    command: >-
      if [[ "$(grep "/${USER}:" /etc/passwd | awk -F '/' '{print $NF}')" != "zsh" ]] ; then chsh -s $(which zsh) ; fi
    description: Making zsh the default shell
  -
    command: >-
      tldr --update
    description: Updating tealdeer cache

- git:
    ~/Pictures/wallpapers:
        description: notchum's wallpapers
        url: https://github.com/notchum/wallpapers
        method: clone-or-pull

# - if:
#     cond: hostname | grep -q 'cruel-oath'
#     met:
#       - link
